<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.jsdelivr.net/pyodide/v0.27.5/full/pyodide.js"></script>
  <link rel="stylesheet" href="styles.css">
  <link rel="shortcut icon" href="#">
</head>
<body>
  <div id="content">
    <h1>Ninjala&trade; Tournament Statistics Creator</h1>
    <p id="about-text"><span class="clickable">Click here for help</span></p>
    <form id="create-tournament-form">
      <div class="form-row">
        <label for="file-input">Tournament Screenshots*</label>
        <div id="drop-zone" class="drop-zone">
          <span id="drop-zone-text">Drag & drop your .zip file here or click to select</span>
          <input type="file" id="file-input" accept=".zip" name="file-input" title="Only .zip files are allowed."
            required />
        </div>
        <span id="file-input-feedback" class="feedback"></span>
      </div>
      <div class="form-toggle">
        <p id="tournament-format-label">Tournament Format</p>
        <div>
          <input id="toggle-solo" class="toggle toggle-left" name="toggle" value="false" type="radio" checked>
          <label for="toggle-solo" class="btn suppress-label">Solo</label>
          <input id="toggle-team" class="toggle toggle-right" name="toggle" value="true" type="radio">
          <label for="toggle-team" class="btn suppress-label">Team</label>
        </div>
      </div>
      <div class="form-row">
        <label for="tournament-name-input">Tournament Name</label>
        <input type="text" id="tournament-name-input" name="tournament-name-input"
          placeholder="example: WNA Tours: Saizo Cup (Solo)" />
      </div>
      <div class="form-row">
        <label for="tournament-short-name-input">Short Name (i.e. Excel Sheet and Excel Table Name)</label>
        <input type="text" id="tournament-short-name-input" name="tournament-short-name-input" pattern="^([A-Za-z_][A-Za-z0-9_]*|)$"
          title="Digits at the beginning and special characters are not allowed." placeholder="example: saizo_solo" />
        <span id="tournament-short-name-input-feedback" class="feedback"></span>
      </div>
      <div class="form-row">
        <input type="submit" id="extract-button" value="Extract" disabled>
      </div>
    </form>
    <div id="loading" class="hidden">
      <div class="loading-circle"></div>
      <p>Loading...</p>
      <p id="extract-feedback"></p>
    </div>
    <div id="download-link" class="hidden">
      <p>Tournament Statistics successfully created!</p>
      <a href="#" download>Download Excel File</a>
    </div>
  </div>
  <div id="overlay" class="overlay"></div>
  <div id="about-tab" class="about-tab">
    <span id="close-tab" class="close-icon">&times;</span> 
    <h2>How to use</h2>
    <p>Click on the blue dashed box and upload your screenshots. Your screenshots must be taken with the screenshot capturing feature of the Nintendo Switch System and must not be renamed. The name should look like this:</p>
    <span class="about-image-file-name">2023040204065400-77C5FCCC39A7B80BD3CF2C480CEBE83C.jpg</span>
    <p>There are two types of images, the website can recognize:</p>
    <img src="./tournament_match_result_example.jpg" alt="Battle History">
    <div class="about-img-desc">The Battle History appears after the winner presentation and stays for 60 seconds.</div>
    <img src="./tournament_match_result_details_example.jpg" alt="Detailed Results">
    <div class="about-img-desc">Press the + Button within the 60 seconds to display the Detailed Results.</div>
    <p>For the first image, the Battle History, watch out for the reward pop-up message. To be safe, take the screenshot after confirming the rewards.</p>
    <p>For the second image, the Detailed Results, you must not scroll down. Take the screenshot right after pressing the + Button.</p>
    <p>Make sure to capture the screenshots within the 60 seconds and before heading to the next match or back to the menu.</p>
  </div>
  <script src="script.js"></script>
</body>
</html>